Please add a section to the top of the file that outlines all phases and tasks using hte format as described in @.CLAUDE.md. Each phase should have a detailed description of what is important about it and what benefits and features we get by implementing it

Ensure plan follows @/docs/rules/rules-idioms.md, an duses TDD, each phase shold be build test, implement code and get test working (but make shyre they are not happy path tests that work, but don't actually prove our code is what we want it to be!!)

No mocks in tests please. only use methods as seen in /workspaces/flowspace/tests/README.md and work with real repo data

Don't assume we will have your current context when we implement the plan, make no assumptions on prio knowledge, be explicit in the plan.

Add a TOC to the top of the plan that quickly links to each main plan section. 

Finally, plaese ensure that the plan stipulates that the tests that are written must follow the "tests as documentation" assertions from rules and idioms. 